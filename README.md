# ๐ ุชูุซูู REST API ููุดุฑูุน E-commece-vitrine

**ุฑุงุจุท ุงูู API ุงูุฑุฆูุณู:**
[https://e-commece-vitrine-api.vercel.app/](https://e-commece-vitrine-api.vercel.app/)

ุฌููุน ุงููุณุงุฑุงุช ุงูุชุงููุฉ ุชุนูู ุนูู `/api` ูุง ูู ููุฐูุฑ ุฎูุงู ุฐูู.  

ุฌููุน ุงููุณุงุฑุงุช ุงูุฎุงุตู ุจุงูุงุฏูู ุชุชุทูุจ ุงุฑุณุงู ุงูููููุฒ ูุน ุงูุทูุจ 
# ููุงุญุธู 
ูุณุชุฎุฏู ุงูุชููู ูู ุงูููุฏุฑ ูููุณุชุฎุฏู ุงูุนุงุฏู ููุงูู ุงูุงุฏูู ุงูุชููู ูุชุฎุฒู ูู ุงู cookies :
```
Authorization: Bearer <access_token>
```

---

## ๐ค ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ

`POST /register`

**Body:**
```json
{
  "name": "ุงุณู ุงููุณุชุฎุฏู",
  "email": "ุงูุจุฑูุฏ ุงูุฅููุชุฑููู",
  "password": "ูููุฉ ุงููุฑูุฑ"
}
```
**Response:**  
ุจูุงูุงุช ุงููุณุชุฎุฏู + accessToken

---

## ๐ ุชุณุฌูู ุงูุฏุฎูู

`POST /login`

**Body:**
```json
{
  "email": "ุงูุจุฑูุฏ ุงูุฅููุชุฑููู",
  "password": "ูููุฉ ุงููุฑูุฑ"
}
```
**Response:**  
ุจูุงูุงุช ุงููุณุชุฎุฏู + accessToken

---
      
# ูุตู ููุงุท ุงูููุงูุฉ ุงูุฎุงุตุฉ ุจุงูุฃุฏูู ูุน ุฃูุซูุฉ ูููุฑููุช ุฅูุฏ
- **ูุณุงุฑ ุงูุชุญูู ูู ุชุณุฌูู ุงูุฏุฎูู:**
  - `GET /verify-login` ููุชุญูู ูู ุชุณุฌูู ุงูุฏุฎูู ุงูุนุงุฏู.
  - `GET /verify-login-admin` ููุชุญูู ูู ุชุณุฌูู ุฏุฎูู ุงูุฃุฏูู (ูุณุชุฎุฏู `adminMiddleware`).

- **ูุณุงุฑ ุชุณุฌูู ุงูุฎุฑูุฌ:** `POST /logout` ููุงุฏูู ููุท ูุงููุง ูุฎุฒู ุชููู ุงูุงุฏูู ูู ุงูููููุฒ.
  - ููุณุญ ููููุฒ ุงูุชููู.

## 1. ุฅุถุงูุฉ ุฃุฏูู ูุชุญุฏูุซ ุงูุฏูุฑ (createuser.js)

### ุฅุถุงูุฉ ุฃุฏูู ุฌุฏูุฏ
- **ุงููุณุงุฑ:** `POST /add-admin`
- **ุงููุตู:** ูุณูุญ ููุฃุฏูู ุงูุญุงูููู ุจุฅุถุงูุฉ ุฃุฏูู ุฌุฏูุฏ.
- **ุงูุชุญูู:** ูุณุชุฎุฏู `middleware` ู `adminMiddleware` ูุญูุงูุฉ ุงููุณุงุฑ.
- **ุฌุณู ุงูุทูุจ:**
  ```json
  {
    "name": "Admin Name",
    "email": "admin@example.com",
    "password": "password123"
  }
  ```
- **ุงูุงุณุชุฌุงุจุฉ:**
  ```json
  {
    "message": "ุชู ุฅุถุงูุฉ ุงูุฃุฏูู ุจูุฌุงุญ."
  }
  ```

### ุชุญุฏูุซ ุตูุงุญูุฉ ูุณุชุฎุฏู
- **ุงููุณุงุฑ:** `PUT /update-role/:id`
- **ุงููุตู:** ุชุนุฏูู ุตูุงุญูุฉ ูุณุชุฎุฏู ุจูู "admin" ู "user".
- **ุงูุชุญูู:** ูุณุชุฎุฏู `middleware` ู `adminMiddleware`.
- **ุงููุนููุงุช:**
  - `id`: ูุนุฑู ุงููุณุชุฎุฏู ูู ุงูุฑุงุจุท.
- **ุฌุณู ุงูุทูุจ:**
  ```json
  {
    "newRole": "admin"  // ุฃู "user"
  }
  ```
- **ุงูุงุณุชุฌุงุจุฉ:**
  ```json
  {
    "message": "ุชู ุชุบููุฑ ุตูุงุญูุฉ ุงููุณุชุฎุฏู ุฅูู admin ุจูุฌุงุญ."
  }
  ```

---
 
### ููุงุญุธุงุช ูููุฑููุช ุฅูุฏ:
- ูุฌุจ ุฅุฑุณุงู ุงูููููุฒ ุงูุชู ุชุญุชูู ุนูู `accessToken` ูุน ุงูุทูุจุงุช ุงููุญููุฉ.
ูุซุงู:
```js
const res = await fetch('/api/ุงููุณุงุฑ_ุงููุทููุจ', {
     method: 'GET',
     credentials: 'include' // ูุฐุง ูุนูู ุฃูู ุณูุชู ุฅุฑุณุงู ุงูููููุฒ ูุน ุงูุทูุจ
});
const data = await res.json();

  ูุซุงู ุจ axios :
const response = await axios.get('/api/ุงููุณุงุฑ_ุงููุทููุจ', {
  withCredentials: true // ูุฐุง ูุนูู ุฃูู ุณูุชู ุฅุฑุณุงู ุงูููููุฒ ูุน ุงูุทูุจ
});
```

- ุงุณุชุฎุฏู ุงููุณุงุฑุงุช ุงููุฐููุฑุฉ ุฃุนูุงู ูุน ุงูุจูุงูุงุช ุงูููุงุณุจุฉ.
- ุชุญูู ูู ุงูุงุณุชุฌุงุจุงุช ููุนุฑูุฉ ูุฌุงุญ ุฃู ูุดู ุงูุนูููุงุช.        
---

```
# Logout Endpoint

## ูุธุฑุฉ ุนุงูุฉ
ูุชู ุงุณุชุฎุฏุงู **ูุณุงุฑ ุชุณุฌูู ุงูุฎุฑูุฌ** (`POST /logout`) ููุณุญ ุงูู **Access Token** ุงููุฎุฒู ูู **ุงูููููุฒ (Cookies)**ุ ูุงูุฐู ูุชู ุงุณุชุฎุฏุงูู ููุท ูุญุณุงุจุงุช **ุงูุฃุฏูู (Admin)**.  
ุฃูุง ุงููุณุชุฎุฏู ุงูุนุงุฏู (User)ุ ูุฅู ุงูุชููู ุงูุฎุงุต ุจู ูุชู ุชุฎุฒููู ูู **Local Storage** ุฃู ูุชู ุฅุฑุณุงูู ูุน ุงูู **Authorization Header**ุ ูุฐูู ูุณุงุฑ ุชุณุฌูู ุงูุฎุฑูุฌ ูุฐุง ูุฎุตุต ููุฃุฏูู ููุท.

---

## **ุงููุณุงุฑ**
```

POST /logout

````

---

## **ุขููุฉ ุงูุนูู**
- ุนูุฏ ุชุณุฌูู ุฏุฎูู ุงูุฃุฏูู (`/login`)ุ ูุชู ุญูุธ **accessToken** ูู **Cookie** ูุน ุฅุนุฏุงุฏุงุช ุฃูุงู ูุซู:
  - `httpOnly: true` (ูููุน ุงููุตูู ููููููุฒ ูู JavaScript ูู ุงููุชุตูุญ).
  - `secure: process.env.NODE_ENV === 'production'` (ูุนูู ููุท ูุน HTTPS ูู ูุถุน ุงูุฅูุชุงุฌ).
  - `sameSite: 'none'` (ููุณูุงุญ ุจุงููุฑูุณ ุฏูููู).
  - `maxAge: 7 ุฃูุงู` (ุนูุฑ ุงูุชููู ูู ุงููููู).

- ุนูุฏ ุงุณุชุฏุนุงุก `/logout`:
  - ูุชู ูุณุญ **accessToken** ูู ุงูููููุฒ ุจุงุณุชุฎุฏุงู `res.clearCookie('accessToken', { ... })`.
  - ููุฑุฌุน ุงูุณูุฑูุฑ ุงุณุชุฌุงุจุฉ ุจูุฌุงุญ ุงูุฎุฑูุฌ:
    ```json
    {
      "message": "ุชู ุชุณุฌูู ุงูุฎุฑูุฌ ุจูุฌุงุญ."
    }
    ```

---

## **ุงููุฑู ุจูู ุงูุฃุฏูู ูุงูููุฒุฑ**
- **ุงูุฃุฏูู:** ูุนุชูุฏ ุนูู ุงูููููุฒ ูุชุฎุฒูู ุงูุชูููุ ูุฐูู ุชุณุฌูู ุงูุฎุฑูุฌ ูุชู ุจูุณุญ ุงูููููุฒ.
- **ุงูููุฒุฑ:** ูุนุชูุฏ ุนูู **Local Storage** ุฃู **Authorization Header** (ูู ุงูู Frontend)ุ ูุฐูู ุนูููุฉ ุชุณุฌูู ุงูุฎุฑูุฌ ูุชู ุชูููุฐูุง ูู ุฎูุงู ุญุฐู ุงูุชููู ูุญูููุง ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ (Frontend) ูููุณ ูู ุฎูุงู ุงูุณูุฑูุฑ.

---

## **ูุซุงู ููุทูุจ (Request Example):**
```http
POST /logout
Host: your-api.com
Cookie: accessToken=<your_admin_access_token>
````

---

## **ุงูุงุณุชุฌุงุจุฉ (Response):**

```json
{
  "message": "ุชู ุชุณุฌูู ุงูุฎุฑูุฌ ุจูุฌุงุญ."
}
```

---

## **ููุงุญุธุงุช ุฃูุงู:**

* ูุฌุจ ุงูุชุฃูุฏ ุฃู **ุงููุณุงุฑ `/logout`** ูุชู ุงุณุชุฏุนุงุคู ููุท ูู ุงูุฃุฏูู ุงูุฐู ุชู ุงูุชุญูู ููู ูุณุจููุง.
* ูุง ููุฌุฏ ุญุงุฌุฉ ููุณุงุฑ Logout ูููุณุชุฎุฏู ุงูุนุงุฏูุ ุญูุซ ูููู ุจุจุณุงุทุฉ ุญุฐู ุงูู `accessToken` ุงููุฎุฒู ูู `localStorage` ุฃู `sessionStorage` ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ.

```
---
## ๐ท๏ธ ุฌูุจ ูู ุงูุชุตูููุงุช

`GET /categories`

**Response:**
```json
[
  { "_id": "...", "name": "...", "slug": "..." }, ...
]
```

---

## ๐๏ธ ุฌูุจ ุงูููุชุฌุงุช ุญุณุจ ุงูุชุตููู

`GET /product/:categoryId`

**Response:**  
ูุงุฆูุฉ ุงูููุชุฌุงุช ูู ุงูุชุตููู

---

## ๐๏ธ ุฌูุจ ุงูููุชุฌุงุช ุญุณุจ ุงูุณูุงุฌ

`GET /productBySlug/:categoryslug`

**Response:**  
ูุงุฆูุฉ ุงูููุชุฌุงุช ูู ุงูุชุตููู

---

## ๐๏ธ ุฌูุจ ูู ุงูููุชุฌุงุช

`GET /products`

**Response:**  
ูุงุฆูุฉ ูู ุงูููุชุฌุงุช

---

## ๐ ุฌูุจ ุงูุนุฑูุถ

`GET /offers?categorySlug=slug&maxPrice=15000&hasOffer=true&limit=10&page=1`

**Response:**
```json
{
  "total": 100,
  "page": 1,
  "pages": 10,
  "products": [ ... ]
}
```

---

## ๐ณ ุฅูุดุงุก ุฌูุณุฉ ุฏูุน Stripe (ูุญูู)

`POST /stripe/create-checkout-session`

**Headers:**
```
Authorization: Bearer <access_token>
```
**Body:**
```json
{
  "cartItems": [
    { "productId": "...", "quantity": 2 },
    { "productId": "...", "quantity": 1 }
  ]
}
```
**Response:**
```json
{ "url": "ุฑุงุจุท ุงูุฏูุน ูู Stripe" }
```

---

## ๐ณ ุฌูุจ ุจูุงูุงุช ุฌูุณุฉ Stripe

`GET /stripe/session/:sessionId`

**Response:**
```json
{
  "amountPaid": 2000,
  "currency": "usd",
  "paymentStatus": "paid",
  "customerName": "ุงุณู ุงูุนููู",
  "customerEmail": "ุงูุจุฑูุฏ ุงูุฅููุชุฑููู",
  "orderId": "..."
}
```

---

## ๐ต ุฅูุดุงุก ุทูุจ ุฏูุน ุนูุฏ ุงูุงุณุชูุงู (ูุญูู)

`POST /cash-on-delivery`

**Headers:**
```
Authorization: Bearer <access_token>
```
**Body:**
```json
{
  "cartItems": [
    { "productId": "...", "quantity": 2 },
    { "productId": "...", "quantity": 1 }
  ]
}
```
**Response:**
```json
{
  "message": "ุชู ุชุณุฌูู ุงูุทูุจ ุจูุฌุงุญ. ุณูุชู ุงูุฏูุน ุนูุฏ ุงูุงุณุชูุงู.",
  "orderId": "...",
  "amount": 1234,
  "products": [ ... ]
}
```

---

## โ ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ (ูุญูู)

`POST /addproduct`

**Headers:**
```
Authorization: Bearer <access_token>
Content-Type: multipart/form-data
```

**Body (form-data):**
| ุงูุญูู      | ุงูููุน | ุงูุญุงูุฉ  | ุงููุตู                        |
|------------|-------|---------|------------------------------|
| `name`     | ูุต    | ูุทููุจ   | ุงุณู ุงูููุชุฌ                   |
| `price`    | ุฑูู   | ูุทููุจ   | ุงูุณุนุฑ ุงูุฃุตูู ููููุชุฌ          |
| `discountedPrice`    | ุฑูู   | ุงุฎุชูุงุฑู   | ุงูุณุนุฑ  ุจุนุฏ ุงูุฎุตู          |
| `categoryId`| ูุต   | ูุทููุจ   | ูุนุฑู ุงูุชุตููู ุงูุฎุงุต ุจุงูููุชุฌ   |
| `image`    | ููู   | ูุทููุจ   | ุตูุฑุฉ ุงูููุชุฌ (File)           |

**ููุงุญุธุงุช ูููุฉ:**
- ูุง ุชุฑุณู ุฃู ุจูุงูุงุช ุฎุตู ูู ุงููุฑููุช (ูุง discountedPrice ููุง discountPercent).
- ุงูุฎุตู ููุญุณุจ ุชููุงุฆููุง ูู ุงูุจุงู ููุท ุฅุฐุง ูุงู ููุงู ุณูุงุณุฉ ุฎุตู (ูุซูุงู ูู ููู ุฎุตู ููุณูู ุฃู ุญุณุจ ุณูุงุณุฉ ุงููุชุฌุฑ).
- ุฅุฐุง ุงุญุชุงุฌุช ุงูุฅุฏุงุฑุฉ ุชูุนูู ุฎุตูุ ูุชู ุฐูู ูู ุงูุจุงู ุฃู ููุญุฉ ุงูุชุญูู ููุท.

**Response:**
```json
{
  "_id": "...",
  "name": "...",
  "price": ...,
  "image": "ุฑุงุจุท ุงูุตูุฑุฉ",
  "categoryId": "...",
  "offer": {
    "isActive": true,
    "discountPercent": 10,
    "discountedPrice": 90
  },
  ...
}
```

---

## โ๏ธ ููุงุญุธุงุช ูุงูุฉ
- ุฌููุน ุงูุฃุณุนุงุฑ ูุงูุฎุตููุงุช ุชูุญุณุจ ูู ุงูุจุงููุฏ ููุท.
- ูุฌุจ ุฅุฑุณุงู ุงูุชููู ูู ุงูููุฏุฑ ูููุณุงุฑุงุช ุงููุญููุฉ.
- ูุง ุชุฑุณู userId ูู ุงููุฑููุชุ ูุชู ุงุณุชุฎูุงุตู ูู ุงูุชููู ุชููุงุฆููุง.
- ุชุญูู ูู ุงูุฑุฏูุฏ ููุนุงูุฌุฉ ุงูุฃุฎุทุงุก.

---

## ๐งโ๐ป ูุซุงู ุนููู (Fetch)

```js
const formData = new FormData();
formData.append('name', 'ุงุณู ุงูููุชุฌ');
formData.append('price', 100);
formData.append('categoryId', 'ูุนุฑู ุงูุชุตููู');
formData.append('image', fileInput.files[0]); // ุตูุฑุฉ ุงูููุชุฌ

const res = await fetch('/api/addproduct', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer <access_token>'
    // ูุง ุชุถุน Content-Type ูุน FormData
  },
  body: formData
});
const data = await res.json();
console.log(data);
```

---





## ๐ ุงูุจุญุซ ุนู ุงูููุชุฌุงุช

`GET /api/search/products?query=your_search_term`

**ุงููุตู:** ุงูุจุญุซ ุนู ุงูููุชุฌุงุช ุจุงุณุชุฎุฏุงู ูููุฉ ุงูุจุญุซ ูู ุงูุญููู ุงููููุฑุณุฉ.

**Response:**
```json
[
  { "_id": "...", "name": "...", "price": ..., "categoryId": "..." },
  ...
]
```

## ๐ก ุงูุชุฑุงุญุงุช ุงูุจุญุซ ุงูุชููุงุฆูุฉ

`GET /api/search/suggestions?query=your_search_term`

**ุงููุตู:** ุฌูุจ ุงูุชุฑุงุญุงุช ุชููุงุฆูุฉ ูุงุณู ุงูููุชุฌ ุจูุงุกู ุนูู ุงูุจุญุซ ุงูุชูุจุคู.

**Response:**
```json
[
  { "name": "...", "image": "..." },
  ...
]
```

## ๐ ุชูุงุตูู ุงูููุชุฌ

`GET /api/product/details/:productId`

**ุงููุตู:** ุฌูุจ ุชูุงุตูู ููุชุฌ ูุนูู ุจูุงุณุทุฉ ูุนุฑู ุงูููุชุฌ.

**Response:**
```json
{
  "_id": "...",
  "name": "...",
  "price": ...,
  "categoryId": "...",
  ...
}
```
     


          
ุชู ุดุฑุญ ูุชูุซูู ุฑูุชุฑ ุชุนุฏูู ุงูููุชุฌ ูู ููู README.md ูููุฑููุช ุงูุฏ. ุฅููู ุงููุณู ุงูุฌุฏูุฏ ุงูุฐู ููููู ุฅุถุงูุชู ูุชูุถูุญ ููููุฉ ุฅุฑุณุงู ุทูุจ ุงูุชุนุฏูู:

---

## โ๏ธ ุชุนุฏูู ููุชุฌ (ูุญูู)

`PATCH api/editproduct/:id`

**Headers:**
```
Authorization: Bearer <access_token>
Content-Type: multipart/form-data
```

**Body (form-data):**
| ุงูุญูู              | ุงูููุน   | ุงูุญุงูุฉ    | ุงููุตู                                 |
|--------------------|---------|-----------|---------------------------------------|
| `name`             | ูุต      | ุงุฎุชูุงุฑู   | ุงุณู ุงูููุชุฌ ุงูุฌุฏูุฏ                     |
| `price`            | ุฑูู     | ุงุฎุชูุงุฑู   | ุงูุณุนุฑ ุงูุฌุฏูุฏ                          |
| `discountedPrice`  | ุฑูู     | ุงุฎุชูุงุฑู   | ุงูุณุนุฑ ุจุนุฏ ุงูุฎุตู                       |
| `categoryId`       | ูุต      | ุงุฎุชูุงุฑู   | ูุนุฑู ุงูุชุตููู ุงูุฌุฏูุฏ                   |
| `image`            | ููู     | ุงุฎุชูุงุฑู   | ุตูุฑุฉ ุฌุฏูุฏุฉ ููููุชุฌ (File)              |

**ููุงุญุธุงุช:**
- ููููู ุฅุฑุณุงู ุฃู ุญูู ุชุฑูุฏ ุชุนุฏููู ููุทุ ูููุณ ูู ุงูุถุฑูุฑู ุฅุฑุณุงู ุฌููุน ุงูุญููู.
- ุฅุฐุง ุฃุฑุณูุช ุตูุฑุฉ ุฌุฏูุฏุฉุ ุณูุชู ุงุณุชุจุฏุงู ุตูุฑุฉ ุงูููุชุฌ ุงููุฏููุฉ.
- ุฅุฐุง ุฃุฑุณูุช discountedPrice ุฃูู ูู ุงูุณุนุฑุ ุณูุชู ุชูุนูู ุงูุฎุตู ุชููุงุฆููุง.

**Response:**
```json
{
  "msg": "ุชู ุชุนุฏูู ุงูููุชุฌ ุจูุฌุงุญ",
  "product": {
    "_id": "...",
    "name": "...",
    "price": ...,
    "image": "ุฑุงุจุท ุงูุตูุฑุฉ",
    "categoryId": "...",
    "offer": {
      "isActive": true,
      "discountPercent": 10,
      "discountedPrice": 90
    }
  }
}
```

**ูุซุงู ุนููู (Fetch):**
```js
const formData = new FormData();
formData.append('name', 'ุงุณู ุฌุฏูุฏ');
formData.append('price', 120);
formData.append('discountedPrice', 100);
formData.append('categoryId', 'ูุนุฑู_ุชุตููู_ุฌุฏูุฏ');
formData.append('image', fileInput.files[0]); // ุตูุฑุฉ ุฌุฏูุฏุฉ

const res = await fetch('/api/editproduct/ูุนุฑู_ุงูููุชุฌ', {
  method: 'PATCH',
  headers: {
    'Authorization': 'Bearer <access_token>'
    // ูุง ุชุถุน Content-Type ูุน FormData
  },
  body: formData
});
const data = await res.json();
console.log(data);
```

---
  
## ๐๏ธ ุญุฐู ููุชุฌ (ูุญูู)

`DELETE /api/deleteproduct/:id`

**Headers:**
```
Authorization: Bearer <access_token>
```

**ุงููุตู:**
ูุญุฐู ูุฐุง ุงูุฑุงูุชุฑ ููุชุฌูุง ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจูุงุกู ุนูู ูุนุฑู ุงูููุชุฌ (`id`). ุฅุฐุง ูุงู ููููุชุฌ ุตูุฑุฉ ูุฎุฒูุฉ ุนูู ImgBBุ ุณูุชู ุญุฐููุง ุฃูุถูุง ุชููุงุฆููุง.

**ุงูุฑุฏ ุงููุงุฌุญ:**
```json
{
  "msg": "ุชู ุญุฐู ุงูููุชุฌ ุจูุฌุงุญ"
}
```

**ูู ุญุงู ุนุฏู ูุฌูุฏ ุงูููุชุฌ:**
```json
{
  "msg": "ุงูููุชุฌ ุบูุฑ ููุฌูุฏ"
}
```

**ูุซุงู ุนููู (Fetch):**
```js
const res = await fetch('/api/deleteproduct/ูุนุฑู_ุงูููุชุฌ', {
  method: 'DELETE',
  headers: {
    'Authorization': 'Bearer <access_token>'
  }
});
const data = await res.json();
console.log(data);
```         
# ๐จ ุฅุฑุณุงู ุฑุณุงูุฉ ุฌุฏูุฏุฉ (ูู ุงูุฃุฏูู)

`POST /api/messages`

### ุงููุตู:
ูุฐุง ุงูุฑูุชุฑ ูุณูุญ ููุฃุฏูู ุจุฅุฑุณุงู ุฑุณุงูุฉ ุฌุฏูุฏุฉ ุฅูู ูุณุชุฎุฏู ูุนูู ุฃู ูุฌููุน ุงููุณุชุฎุฏููู.

### ุงูุฑุคูุณ (Headers):
- ูุง ูุชุทูุจ ุชููู ูู ูุฐุง ุงููุซุงูุ ููู ูููู ุฅุถุงูุฉ ุญูุงูุฉ ุญุณุจ ุงูุญุงุฌุฉ.

### ุฌุณู ุงูุทูุจ (Body) - JSON:
```json
{
  "title": "ุนููุงู ุงูุฑุณุงูุฉ",
  "content": "ูุญุชูู ุงูุฑุณุงูุฉ",
  "forUser": "ูุนุฑู ุงููุณุชุฎุฏู ุงููุณุชูุฏู (ุงุฎุชูุงุฑู)",
  "forAll": true ุฃู false
}
```

- `title` ู `content` ููุง ุญููู ุฅูุฒุงููุฉ.
- `forUser` ูู ูุนุฑู ุงููุณุชุฎุฏู ุงูุฐู ุณุชุฑุณู ูู ุงูุฑุณุงูุฉุ ููููู null ุฅุฐุง ูุงูุช ุงูุฑุณุงูุฉ ููุฌูุฉ ููุฌููุน.
- `forAll` ุฅุฐุง ูุงูุช trueุ ูุชู ุฅุฑุณุงู ุงูุฑุณุงูุฉ ูุฌููุน ุงููุณุชุฎุฏููู.

### ุงูุงุณุชุฌุงุจุงุช:
- ุนูุฏ ุงููุฌุงุญ:
```json
{
  "message": "ุชู ุฅุฑุณุงู ุงูุฑุณุงูุฉ ุจูุฌุงุญ"
}
```
- ุนูุฏ ูุฌูุฏ ุฎุทุฃ ูู ุงูุจูุงูุงุช (ูุซู ุนุฏู ูุฌูุฏ ุงูุนููุงู ุฃู ุงููุญุชูู):
```json
{
  "message": "ุงูุนููุงู ูุงููุญุชูู ูุทููุจูู"
}
```
- ุนูุฏ ุญุฏูุซ ุฎุทุฃ ูู ุงูุฎุงุฏู:
```json
{
  "message": "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฅุฑุณุงู ุงูุฑุณุงูุฉ",
  "error": "ุชูุงุตูู ุงูุฎุทุฃ"
}
```

### ูุซุงู ุนููู (Fetch) ูููุฑููุช ุฅูุฏ:
```js
const messageData = {
  title: "ุชูุจูู ููู",
  content: "ูุฑุฌู ุชุญุฏูุซ ุจูุงูุงุชู ุงูุดุฎุตูุฉ.",
  forUser: "ูุนุฑู_ุงููุณุชุฎุฏู_ุฅู_ูุงู_ูุฎุตุตูุง",
  forAll: false
};

const res = await fetch('/api/messages', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify(messageData)
});

const data = await res.json();
console.log(data);
```
---      
                      
## ๐ฅ ุฌูุจ ูู ุงููุณุชุฎุฏููู

`GET /api/Users`

### ุงููุตู:
ูุฐุง ุงูุฑูุชุฑ ูููู ุจุฌูุจ ูุงุฆูุฉ ุจูู ุงููุณุชุฎุฏููู ุงููุณุฌููู ูู ุงููุธุงู.

### ุงูุงุณุชุฌุงุจุงุช:
- ุนูุฏ ุงููุฌุงุญ:
```json
{
  "ALL_Users": [
    { "_id": "...", "name": "...", "email": "..." },
    ...
  ]
}
```
- ุฅุฐุง ูู ููู ููุงู ูุณุชุฎุฏููู:
```json
{
  "message": "ูุง ููุฌุฏ ูุณุชุฎุฏููู"
}
```
- ุนูุฏ ุญุฏูุซ ุฎุทุฃ ูู ุงูุฎุงุฏู:
```json
{
  "message": "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฌูุจ ุงูุจูุงูุงุช"
}
```

---

## ๐จ ุฌูุจ ุงูุฑุณุงุฆู (ูุญูู ุฌุฒุฆูุงู)

`GET /api/Get_messages`

### ุงููุตู:
ูุฐุง ุงูุฑูุชุฑ ูููู ุจุฌูุจ ุงูุฑุณุงุฆู ุงูุชู ุชู ุฅุฑุณุงููุง ูููุณุชุฎุฏู. ุฅุฐุง ุชู ุฅุฑุณุงู ุชููู JWT ุตุงูุญ ูู ุงูููุฏุฑุ ุณูุชู ุฌูุจ ุงูุฑุณุงุฆู ุงูููุฌูุฉ ูููุณุชุฎุฏู ุจุงูุฅุถุงูุฉ ุฅูู ุงูุฑุณุงุฆู ุงูุนุงูุฉ. ุฅุฐุง ูู ูุชู ุฅุฑุณุงู ุชููู ุฃู ูุงู ุบูุฑ ุตุงูุญุ ุณูุชู ุฌูุจ ุงูุฑุณุงุฆู ุงูุนุงูุฉ ููุท.

### ุงูุฑุคูุณ (Headers):
```
Authorization: Bearer <access_token>  (ุงุฎุชูุงุฑู)
```

### ุงูุงุณุชุฌุงุจุงุช:
- ุนูุฏ ุงููุฌุงุญ:
```json
{
  "messages": [
    {
      "_id": "...",
      "title": "...",
      "content": "...",
      "forUser": "..." ุฃู null,
      "forAll": true ุฃู false,
      "createdAt": "..."
    },
    ...
  ]
}
```
- ุนูุฏ ุญุฏูุซ ุฎุทุฃ ูู ุงูุฎุงุฏู:
```json
{
  "message": "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฌูุจ ุงูุฑุณุงุฆู"
}
```

---

### ูุซุงู ุนููู (Fetch) ูุฌูุจ ุงูุฑุณุงุฆู:
```js
const res = await fetch('/api/Get_messages', {
  method: 'GET',
  headers: {
    'Authorization': 'Bearer <access_token>' // ูููู ุญุฐู ูุฐุง ุงูููุฏุฑ ูุฌูุจ ุงูุฑุณุงุฆู ุงูุนุงูุฉ ููุท
  }
});
const data = await res.json();
console.log(data.messages);
```  



          
## ๐ฌ ุฅุฑุณุงู ุฑุณุงูุฉ "ุงุชุตู ุจูุง" (ูุญูู ุฌุฒุฆูุงู)

`POST /api/postCuntactUs`

### ุงููุตู:
ูุฐุง ุงูุฑูุชุฑ ูุณูุญ ูููุณุชุฎุฏููู ุงููุณุฌููู ุฃู ุงูุฒูุงุฑ ุจุฅุฑุณุงู ุฑุณุงูุฉ "ุงุชุตู ุจูุง" ุฅูู ุงููุธุงู. ูุชุทูุจ ุชุณุฌูู ุฏุฎูู ุงุฎุชูุงุฑู (ูููู ุฅุฑุณุงู ุงูุฑุณุงูุฉ ุจุฏูู ุชุณุฌูู ุฏุฎูู).

### ุงูุฑุคูุณ (Headers):
- ุชููู JWT ุงุฎุชูุงุฑู ูู ุงูููุฏุฑ ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ูุณุฌูุงู.

### ุฌุณู ุงูุทูุจ (Body) - JSON:
```json
{
  "name": "ุงุณู ุงููุฑุณู (ุงุฎุชูุงุฑู ูููุณุชุฎุฏููู ุงููุณุฌููู)",
  "email": "ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ุงุฎุชูุงุฑู ูููุณุชุฎุฏููู ุงููุณุฌููู)",
  "subject": "ููุถูุน ุงูุฑุณุงูุฉ (ุงุฎุชูุงุฑู)",
  "message": "ูุต ุงูุฑุณุงูุฉ (ูุทููุจ)",
  "phone": "ุฑูู ุงููุงุชู (ุงุฎุชูุงุฑู)"
}
```

- `message` ูู ุงูุญูู ุงููุญูุฏ ุงูุฅูุฒุงูู.
- ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ูุณุฌูุงูุ ูุชู ุงุณุชุฎุฏุงู ุงุณูู ูุจุฑูุฏู ุงูุฅููุชุฑููู ูู ุงูุชููู.
- ุฅุฐุง ูุงู ุงูุฒุงุฆุฑ ุบูุฑ ูุณุฌูุ ูุฌุจ ุฅุฑุณุงู ุงูุงุณู ูุงูุจุฑูุฏ ุงูุฅููุชุฑููู.

### ุงูุงุณุชุฌุงุจุงุช:
- ุนูุฏ ุงููุฌุงุญ:
```json
{
  "message": "ุชู ุฅุฑุณุงู ุงูุฑุณุงูุฉ ุจูุฌุงุญ"
}
```
- ุนูุฏ ูุฌูุฏ ุฎุทุฃ ูู ุงูุจูุงูุงุช (ูุซู ุนุฏู ูุฌูุฏ ูุต ุงูุฑุณุงูุฉ ุฃู ุงูุงุณู/ุงูุจุฑูุฏ ููุฒูุงุฑ):
```json
{
  "message": "ูุต ุงูุฑุณุงูุฉ ูุทููุจ" ุฃู "ุงูุงุณู ูุงูุจุฑูุฏ ูุทููุจุงู ููุฒูุงุฑ"
}
```
- ุนูุฏ ุญุฏูุซ ุฎุทุฃ ูู ุงูุฎุงุฏู:
```json
{
  "message": "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุฅุฑุณุงู",
  "error": "ุชูุงุตูู ุงูุฎุทุฃ"
}
```

---

## ๐ฅ ุฌูุจ ูู ุฑุณุงุฆู "ุงุชุตู ุจูุง" (ูุญูู)

`GET /api/getContactMessage`

### ุงููุตู:
ูุฐุง ุงูุฑูุชุฑ ูุณูุญ ููุฃุฏูู ุจุฌูุจ ูู ุฑุณุงุฆู "ุงุชุตู ุจูุง" ูุน ุจูุงูุงุช ุงููุณุชุฎุฏู ุงููุฑุชุจุทุฉ (ุงูุงุณู ูุงูุจุฑูุฏ ุงูุฅููุชุฑููู).

### ุงูุงุณุชุฌุงุจุงุช:
- ุนูุฏ ุงููุฌุงุญ:
```json
[
  {
    "_id": "...",
    "userId": { "_id": "...", "name": "...", "email": "..." } ุฃู null,
    "name": "...",
    "email": "...",
    "subject": "...",
    "message": "...",
    "phone": "...",
    "status": "new" ุฃู "read" ุฃู "archived",
    "responded": true ุฃู false,
    "createdAt": "...",
    "updatedAt": "..."
  },
  ...
]
```
- ุนูุฏ ุญุฏูุซ ุฎุทุฃ ูู ุงูุฎุงุฏู:
```json
{
  "message": "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฌูุจ ุงูุฑุณุงุฆู",
  "error": "ุชูุงุตูู ุงูุฎุทุฃ"
}
```

---

### ูุซุงู ุนููู (Fetch) ูุฅุฑุณุงู ุฑุณุงูุฉ "ุงุชุตู ุจูุง":
```js
const contactData = {
  name: "ุงุณู ุงููุณุชุฎุฏู",
  email: "ุงูุจุฑูุฏ ุงูุฅููุชุฑููู",
  subject: "ููุถูุน ุงูุฑุณุงูุฉ",
  message: "ูุต ุงูุฑุณุงูุฉ",
  phone: "ุฑูู ุงููุงุชู"
};

const res = await fetch('/api/postCuntactUs', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    // 'Authorization': 'Bearer <access_token>' // ุงุฎุชูุงุฑู ูุฅุฑุณุงู ุงูุฑุณุงูุฉ ูููุณุชุฎุฏู ุงููุณุฌููู
  },
  body: JSON.stringify(contactData)
});

const data = await res.json();
console.log(data);
```

---

### ูุซุงู ุนููู (Fetch) ูุฌูุจ ูู ุฑุณุงุฆู "ุงุชุตู ุจูุง":
```js
const res = await fetch('/api/getContactMessage', {
  method: 'GET',
  headers: {
    'Content-Type': 'application/json',
  }
});
const messages = await res.json();
console.log(messages);
```

--- 

## ๐ ุฌูุจ ูู ุงูุทูุจุงุช ูุน ููุชุฑุฉ ูุชุฑุชูุจ ูุชูุณูู ุงูุตูุญุงุช (ูุญูู)

`GET /api/admin/orders`

### ุงููุตู:
- ูุฐู ุงููุณุงุฑ ูุณูุญ ูููุณุคูู ุจุฌูุจ ุฌููุน ุงูุทูุจุงุช ูุน ุฅููุงููุฉ ุชุทุจูู ููุชุฑุฉ ุญุณุจ ูุนุฑู ุงููุณุชุฎุฏู ุฃู ุญุงูุฉ ุงูุทูุจ.
- ูููู ุชุฑุชูุจ ุงููุชุงุฆุฌ ุญุณุจ ุฃู ุญูู (ุงูุชุฑุงุถููุง ุญุณุจ ุชุงุฑูุฎ ุงูุฅูุดุงุก) ูุจุงุชุฌุงู ุชุตุงุนุฏู ุฃู ุชูุงุฒูู.
- ูุฏุนู ุชูุณูู ุงูุตูุญุงุช ูุชุญุฏูุฏ ุงูุตูุญุฉ ูุนุฏุฏ ุงูุทูุจุงุช ูู ูู ุตูุญุฉ.

### ุงููุนุงููุงุช (Query Parameters):
| ุงููุนุงูู   | ุงูููุน   | ุงููุตู                                   |
|----------|---------|-----------------------------------------|
| `userId` | ูุต     | (ุงุฎุชูุงุฑู) ููุชุฑุฉ ุงูุทูุจุงุช ุญุณุจ ูุนุฑู ุงููุณุชุฎุฏู |
| `status` | ูุต     | (ุงุฎุชูุงุฑู) ููุชุฑุฉ ุงูุทูุจุงุช ุญุณุจ ุงูุญุงูุฉ (ูุซูุงู "pending", "completed") |
| `sortBy` | ูุต     | (ุงุฎุชูุงุฑู) ุงูุญูู ุงูุฐู ุณูุชู ุงูุชุฑุชูุจ ุจูุงุกู ุนููู (ุงูุชุฑุงุถู: `createdAt`) |
| `order`  | ูุต     | (ุงุฎุชูุงุฑู) ุงุชุฌุงู ุงูุชุฑุชูุจ: `asc` ุฃู `desc` (ุงูุชุฑุงุถู: `desc`) |
| `page`   | ุฑูู     | (ุงุฎุชูุงุฑู) ุฑูู ุงูุตูุญุฉ (ุงูุชุฑุงุถู: 1) |
| `limit`  | ุฑูู     | (ุงุฎุชูุงุฑู) ุนุฏุฏ ุงูุทูุจุงุช ูู ุงูุตูุญุฉ (ุงูุชุฑุงุถู: 10) |

### ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ:
```json
{
  "total": 100,          // ุฅุฌูุงูู ุนุฏุฏ ุงูุทูุจุงุช ุงููุทุงุจูุฉ ููููุชุฑุฉ
  "page": 1,             // ุงูุตูุญุฉ ุงูุญุงููุฉ
  "pages": 10,           // ุฅุฌูุงูู ุนุฏุฏ ุงูุตูุญุงุช
  "orders": [            // ูุงุฆูุฉ ุงูุทูุจุงุช
    {
      "_id": "...",
      "userId": "...",
      "status": "...",
      "products": [
        {
          "productId": {
            "title": "...",
            "image": "...",
            "price": 100
          },
          "quantity": 2
        }
      ],
      "createdAt": "...",
      "updatedAt": "..."
    },
    ...
  ]
}
```

### ุงูุฃุฎุทุงุก ุงููุญุชููุฉ:
- 500: ุฎุทุฃ ูู ุงูุณูุฑูุฑ ุนูุฏ ุฌูุจ ุงูุทูุจุงุช.

---

## ๐งโ๐ป ุฌูุจ ุทูุจุงุช ุงููุณุชุฎุฏู ุงูุญุงูู (ูุญูู)

`GET /api/user/orders`

### ุงููุตู:
- ูุฐุง ุงููุณุงุฑ ูุณูุญ ูููุณุชุฎุฏู ุงููุณุฌู ุจุฌูุจ ุทูุจุงุชู ุงูุฎุงุตุฉ.
- ูุชุทูุจ ุฅุฑุณุงู ุชููู JWT ูู ุงูููุฏุฑ.

### ุงูููุฏุฑ:
```
Authorization: Bearer <access_token>
```

### ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ:
```json
{
  "userEmail": "user@example.com",
  "userName": "User Name",
  "orders": [
    {
      "_id": "...",
      "status": "...",
      "products": [ ... ],
      "createdAt": "..."
    },
    ...
  ]
}
```

### ุงูุฃุฎุทุงุก ุงููุญุชููุฉ:
- 500: ุฎุทุฃ ูู ุงูุณูุฑูุฑ ุนูุฏ ุฌูุจ ุงูุทูุจุงุช.

---

## ๐งโ๐ป ูุซุงู ุนููู (Fetch) ูุฌูุจ ุทูุจุงุช ุงููุณุชุฎุฏู:

```js
const res = await fetch('/api/user/orders', {
  method: 'GET',
  headers: {
    'Authorization': 'Bearer <access_token>'
  }
});
const data = await res.json();
console.log(data);
```  
## ๐ ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ (ูุญูู)

`PATCH /api/admin/orders/:orderId/status`

### ุงููุตู:
- ูุฐุง ุงููุณุงุฑ ูุณูุญ ูููุณุคูู ุจุชุญุฏูุซ ุญุงูุฉ ุทูุจ ูุนูู ุจุงุณุชุฎุฏุงู ูุนุฑู ุงูุทูุจ.
- ูุฌุจ ุฅุฑุณุงู ุชููู JWT ูู ุงูููุฏุฑ ูููุตุงุฏูุฉ.

### ุงูุฑุคูุณ (Headers):
```
Authorization: Bearer <access_token>
Content-Type: application/json
```

### ุงููุนุงููุงุช:
- `orderId` ูู ูุณุงุฑ URL: ูุนุฑู ุงูุทูุจ ุงูุฐู ุณูุชู ุชุญุฏูุซ ุญุงูุชู.

### ุฌุณู ุงูุทูุจ (Body) - JSON:
```json
{
  "status": "new_status_value"
}
```
- `status` ูุฌุจ ุฃู ูููู ูุงุญุฏูุง ูู ุงูููู ุงูุชุงููุฉ:
  - `pending`
  - `confirmed`
  - `processing`
  - `shipped`
  - `delivered`
  - `cancelled`
  - `returned`
  - `failed`

### ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ:
```json
{
  "message": "Order status updated successfully",
  "order": "updated_status_value"
}
```

### ุงูุฃุฎุทุงุก ุงููุญุชููุฉ:
- 400: ุฅุฐุง ูุงูุช ูููุฉ ุงูุญุงูุฉ ุบูุฑ ุตุงูุญุฉ.
- 404: ุฅุฐุง ูู ูุชู ุงูุนุซูุฑ ุนูู ุงูุทูุจ.
- 500: ุฎุทุฃ ูู ุงูุณูุฑูุฑ ุฃุซูุงุก ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ.

---

### ูุซุงู ุนููู (Fetch) ูุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ:
```js
const res = await fetch('/api/admin/orders/ูุนุฑู_ุงูุทูุจ/status', {
  method: 'PATCH',
  headers: {
    'Authorization': 'Bearer <access_token>',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({ status: 'shipped' })
});
const data = await res.json();
console.log(data);
```  
 ---    
### ูุตู API ุญุฐู ุฑุณุงูุฉ (Delete Message) ูููุฑููุช ุฅูุฏ

- **ุงููุณุงุฑ:** `DELETE /delete_message/:id`
- **ุงููุตู:** ูุณูุญ ูุฐุง ุงูุฑุงูุชุฑ ูููุณุชุฎุฏู ุจุญุฐู ุฑุณุงูุฉ ูุนููุฉ ุจูุงุกู ุนูู ูุนุฑู ุงูุฑุณุงูุฉ (`id`).
- **ุงูุชุญูู:** ูุชุทูุจ ุชููู JWT ุตุงูุญ ูู ุงูููุฏุฑ (ูุญูู ุจูุงุณุทุฉ `authMiddleware`).

#### ููููุฉ ุงูุงุณุชุฎุฏุงู:
- ูุฌุจ ุฅุฑุณุงู ุทูุจ `DELETE` ุฅูู ุงููุณุงุฑ ูุน ุงุณุชุจุฏุงู `:id` ุจูุนุฑู ุงูุฑุณุงูุฉ ุงููุฑุงุฏ ุญุฐููุง.
- ูุฌุจ ุฅุฑุณุงู ุงูุชููู ูู ุงูููุฏุฑ `Authorization` ุจุตูุบุฉ:
  ```
  Authorization: Bearer <access_token>
  ```

#### ุณููู ุงูุญุฐู:
- ุฅุฐุง ูุงูุช ุงูุฑุณุงูุฉ ููุฌูุฉ ููุฌููุน (`forAll` = true)ุ ูุชู ููุท ุชุณุฌูู ุฃู ุงููุณุชุฎุฏู ุญุฐู ุงูุฑุณุงูุฉ ุนูุฏู (ูุง ูุชู ุญุฐููุง ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช).
- ุฅุฐุง ูุงูุช ุงูุฑุณุงูุฉ ุฎุงุตุฉ ุจุงููุณุชุฎุฏูุ ูุชู ุญุฐููุง ููุงุฆููุง ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.

#### ุงูุงุณุชุฌุงุจุงุช:
- ุนูุฏ ุงููุฌุงุญ:
  ```json
  { "message": "ุชู ุญุฐู ุงูุฑุณุงูุฉ ุจูุฌุงุญ" }
  ```
- ุฅุฐุง ูู ูุชู ุงูุนุซูุฑ ุนูู ุงูุฑุณุงูุฉ:
  ```json
  { "message": "ุงูุฑุณุงูุฉ ุบูุฑ ููุฌูุฏุฉ" }
  ```
- ุนูุฏ ุญุฏูุซ ุฎุทุฃ ูู ุงูุฎุงุฏู:
  ```json
  { "message": "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุญุฐู ุงูุฑุณุงูุฉ" }
  ```

---

### ูุซุงู ุนููู (Fetch) ูููุฑููุช ุฅูุฏ:
```js
const messageId = 'ูุนุฑู_ุงูุฑุณุงูุฉ';
const res = await fetch(`/api/delete_message/${messageId}`, {
  method: 'DELETE',
  headers: {
    'Authorization': 'Bearer <access_token>'
  }
});
const data = await res.json();
console.log(data);
```

- ุชุฃูุฏ ูู ุงุณุชุจุฏุงู `<access_token>` ุจุงูุชููู ุงูุตุญูุญ ูููุณุชุฎุฏู.
- ุชุญูู ูู ุงูุงุณุชุฌุงุจุฉ ููุนุฑูุฉ ูุฌุงุญ ุฃู ูุดู ุนูููุฉ ุงูุญุฐู.
   
---

ูุฃู ุงุณุชูุณุงุฑ ุนู ุฃู Endpoint ุฃู ุฅุถุงูุฉ ุชูุซูู ููุณุงุฑุงุช ุฃุฎุฑูุ ุชูุงุตู ูุน ูุฑูู ุงูุจุงููุฏ.
